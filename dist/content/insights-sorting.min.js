window.App=window.App||{},window.App.InsightsSorting={initialize:function(){document.querySelector("#insights")&&(this.initFilterDropdown(),this.initFiltering(),console.log("Insights filtering initialized at 2025-04-14 17:57:01 by Druhin13"))},initFilterDropdown:function(){let selectElement=document.querySelector("#insights-filter-select");if(selectElement){for(;1<selectElement.options.length;)selectElement.remove(1);var filterButtons=document.querySelectorAll("[data-dt-filter-cms='#insights']");if(filterButtons.length){let filterTypes=new Set,filterOptions=[];filterButtons.forEach(button=>{var filterType=button.getAttribute("data-dt-filter");filterType&&"all"!==filterType&&(button=this.getFilterButtonText(button),filterTypes.has(filterType)||(filterTypes.add(filterType),filterOptions.push({value:filterType,text:button})))}),filterOptions.sort((a,b)=>a.text.localeCompare(b.text)),filterOptions.forEach(option=>{var optionElement=document.createElement("option");optionElement.value=option.value,optionElement.textContent=option.text,selectElement.appendChild(optionElement)}),selectElement.addEventListener("change",e=>{var selectedFilter=e.target.value,e=e.target.options[e.target.selectedIndex].text;this.applyFilteringWithBlur(selectedFilter||"all",e||"All"),this.updateActiveFilterButton(selectedFilter||"all")})}}},updateActiveFilterButton:function(filterType){var filterButtons=document.querySelectorAll("[data-dt-filter-cms='#insights']"),filterButtons=(filterButtons.forEach(btn=>btn.classList.remove("active")),Array.from(filterButtons).find(btn=>btn.getAttribute("data-dt-filter")===filterType));filterButtons&&filterButtons.classList.add("active")},initFiltering:function(){let filterButtons=document.querySelectorAll("[data-dt-filter-cms='#insights']");filterButtons.length&&filterButtons.forEach(button=>{button.addEventListener("click",e=>{e.preventDefault(),filterButtons.forEach(btn=>btn.classList.remove("active")),button.classList.add("active");var e=button.getAttribute("data-dt-filter"),filterName=this.getFilterButtonText(button);this.updateDropdownSelection(e),this.applyFilteringWithBlur(e,filterName)})})},updateDropdownSelection:function(filterType){var selectElement=document.querySelector("#insights-filter-select");selectElement&&(selectElement.value="all"===filterType?"":filterType)},getFilterButtonText:function(button){try{var textElement=button.querySelector(".body1-1");return(textElement||button).textContent.trim()}catch(e){return console.warn("Error getting filter button text:",e),"selected filter"}},applyFilteringWithBlur:function(filterType,filterName){var insightsContainer=document.querySelector("#insights");if(insightsContainer){let allCards=insightsContainer.querySelectorAll(".insights-overview-card");if(allCards.length){let emptyStateElement=document.querySelector("#insights-empty");try{this.applyBlurToCards(allCards,!0),emptyStateElement&&(emptyStateElement.style.transition="filter 0.3s ease-out, opacity 0.3s ease-out",emptyStateElement.style.filter="blur(5px)",emptyStateElement.style.opacity="0"),setTimeout(()=>{let visibleCount=0,visibleCards=(allCards.forEach(card=>{var shouldShow="all"===filterType||this.cardHasTag(card,filterType);card.style.display=shouldShow?"":"none",shouldShow&&visibleCount++}),emptyStateElement&&(0===visibleCount?(this.updateEmptyStateMessage(emptyStateElement,filterType,filterName),emptyStateElement.style.display="block",setTimeout(()=>{emptyStateElement.style.transition="filter 0.3s ease-in, opacity 0.3s ease-in",emptyStateElement.style.filter="blur(0)",emptyStateElement.style.opacity="1"},50)):emptyStateElement.style.display="none"),Array.from(allCards).filter(card=>"none"!==window.getComputedStyle(card).display));setTimeout(()=>{this.applyBlurToCards(visibleCards,!1),this.updateLocomotiveScroll(),setTimeout(()=>{this.scrollToTop()},100)},50)},300)}catch(e){console.error("Error applying filtering:",e)}}}},scrollToTop:function(){try{window.App.LocomotiveScroll&&window.App.LocomotiveScroll.instance?window.App.LocomotiveScroll.instance.scrollTo(0,{duration:800,easing:[.25,.1,.25,1]}):window.App.Core&&window.App.Core.scrollInstance?window.App.Core.scrollInstance.scrollTo(0,{duration:800,easing:[.25,.1,.25,1]}):(window.scrollTo({top:0,behavior:"smooth"}),document.documentElement.scrollTo({top:0,behavior:"smooth"}),document.body.scrollTo({top:0,behavior:"smooth"})),console.log("[2025-04-14 17:57:01] Scrolled to top (User: Druhin13)")}catch(e){console.warn("Error scrolling to top:",e),window.scrollTo(0,0)}},updateEmptyStateMessage:function(emptyElement,filterType,filterName){try{var message;"all"===filterType?emptyElement.textContent="There are currently no insights available.":(message=`Sorry, we couldn't find any insights with the "${filterName}" tag. Please try a different filter or check back later. [2025-04-14]`,emptyElement.textContent=message)}catch(e){console.warn("Error updating empty state message:",e),emptyElement.textContent="No matching insights found for your filter."}},applyBlurToCards:function(cards,shouldBlur){cards.forEach(card=>{shouldBlur?(card.style.transition="filter 0.3s ease-out",card.style.filter="blur(5px)",card.style.opacity="0.7"):(card.style.transition="filter 0.3s ease-in",card.style.filter="blur(0)",card.style.opacity="1")})},cardHasTag:function(card,tagType){try{return 0<card.querySelectorAll(`[data-dt-filter-tag="${tagType}"]`).length}catch(e){return console.warn("Error checking card tags:",e),!1}},updateLocomotiveScroll:function(){setTimeout(()=>{window.App.LocomotiveScroll&&window.App.LocomotiveScroll.instance?window.App.LocomotiveScroll.instance.update():window.App.Core&&window.App.Core.scrollInstance&&window.App.Core.scrollInstance.update()},100)}},document.addEventListener("DOMContentLoaded",function(){window.currentUser="Druhin13",window.App.InsightsSorting.initialize()});