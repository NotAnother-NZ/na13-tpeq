window.App=window.App||{},window.App.WebflowHandler={debug:!0,initialized:!1,initCount:0,initTimeouts:[],log:function(...args){this.debug&&console.log("[WebflowHandler]",...args)},clearAllTimeouts:function(){this.initTimeouts.forEach(timeout=>{clearTimeout(timeout)}),this.initTimeouts=[]},forceIX2Init:function(){try{if(window.Webflow&&window.Webflow.require){var ix2=window.Webflow.require("ix2");if(ix2&&(ix2.destroy&&ix2.destroy(),ix2.init))return ix2.init(),this.log("IX2 directly initialized"),!0}return window.Webflow&&window.Webflow.ix2&&(window.Webflow.ix2.destroy&&window.Webflow.ix2.destroy(),window.Webflow.ix2.init)?(window.Webflow.ix2.init(),this.log("IX2 initialized through Webflow.ix2"),!0):!(!window.__wf_ix2||(window.__wf_ix2.destroy&&window.__wf_ix2.destroy(),!window.__wf_ix2.init)||(window.__wf_ix2.init(),this.log("IX2 initialized through __wf_ix2"),0))}catch(e){return this.log("Error forcing IX2 init:",e),!1}},initializeWebflow:function(force=!1){if(this.initCount++,this.log(`Initializing Webflow (attempt #${this.initCount}, force: ${force})`),force&&(this.clearAllTimeouts(),this.initialized=!1),this.initialized&&!force)this.log("Already initialized, skipping");else if(window.Webflow)try{window.Webflow.destroy&&window.Webflow.destroy(),window.Webflow.ready&&(window.Webflow.ready(),this.log("Webflow.ready() called")),this.forceIX2Init();var allIxElements=document.querySelectorAll("[data-ix]"),finalTimeout=(0<allIxElements.length&&(this.log(`Found ${allIxElements.length} interaction elements`),allIxElements.forEach(el=>{el.setAttribute("data-ix-force","force"),setTimeout(()=>{el.removeAttribute("data-ix-force")},10)})),this.initialized=!0,this.log("Webflow initialization complete"),setTimeout(()=>{this.forceIX2Init()},300));this.initTimeouts.push(finalTimeout)}catch(e){this.log("Error initializing Webflow:",e)}else this.log("Webflow not available yet"),this.initCount<8&&(force=Math.min(100*Math.pow(1.5,this.initCount-1),2e3),allIxElements=setTimeout(()=>{this.initializeWebflow()},force),this.initTimeouts.push(allIxElements))},scheduleMultipleInits:function(){this.clearAllTimeouts();[10,100,300,600,1e3,2e3,3500].forEach((delay,index)=>{var timeout=setTimeout(()=>{this.log(`Scheduled initialization #${index+1} (delay: ${delay}ms)`),this.initializeWebflow(!0)},delay);this.initTimeouts.push(timeout)})},setupEventListeners:function(){this.initializeWebflow(),this.scheduleMultipleInits(),"loading"===document.readyState&&document.addEventListener("DOMContentLoaded",()=>{this.log("DOMContentLoaded fired"),this.initializeWebflow(!0),this.scheduleMultipleInits()}),window.addEventListener("load",()=>{this.log("Window load fired"),this.initializeWebflow(!0),setTimeout(()=>{this.initializeWebflow(!0)},500)}),document.addEventListener("swup:contentReplaced",()=>{this.log("Swup content replaced"),this.initialized=!1,this.initializeWebflow(!0),this.scheduleMultipleInits()}),document.addEventListener("swup:pageView",()=>{this.log("Swup page view"),setTimeout(()=>{this.initializeWebflow(!0)},150)}),document.addEventListener("DOMNodeInserted",e=>{"SCRIPT"===e.target.nodeName&&setTimeout(()=>{this.initializeWebflow(!0)},100)}),new MutationObserver(mutations=>{let shouldInit=!1;mutations.forEach(mutation=>{"childList"===mutation.type&&mutation.addedNodes.forEach(node=>{1===node.nodeType&&(node.hasAttribute&&node.hasAttribute("data-ix")||node.querySelector&&node.querySelector("[data-ix]"))&&(shouldInit=!0)}),"attributes"===mutation.type&&"data-ix"===mutation.attributeName&&(shouldInit=!0)}),shouldInit&&(this.log("Significant DOM changes detected, reinitializing"),this.initializeWebflow(!0))}).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-ix"]})}},window.App.WebflowHandler.setupEventListeners(),window.initializeWebflowInteractions=function(){window.App.WebflowHandler.initializeWebflow(!0)},window.webflowHandler=window.App.WebflowHandler;