window.App=window.App||{},window.App.VideoLoopHandler={debug:!0,log:function(...args){this.debug&&console.log("[VideoLoopHandler]",...args)},playAllLoopingVideos:function(){var loopingVideos=document.querySelectorAll('video[data-dt-video-loop="true"]');this.log(`Found ${loopingVideos.length} looping videos on page`),loopingVideos.length&&loopingVideos.forEach((video,index)=>{if(!!(0<video.currentTime&&!video.paused&&!video.ended&&2<video.readyState))this.log(`Video ${index+1} is already playing`);else{this.log(`Video ${index+1} is not playing, attempting to start it`),video.loop=!0,video.muted=!0,video.playsInline=!0;try{video.load();var playPromise=video.play();void 0!==playPromise&&playPromise.catch(error=>{this.log(`Error playing video ${index+1}:`,error),/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)&&(this.log("Mobile device detected, trying alternative play method"),setTimeout(()=>{video.load(),video.play().catch(e=>this.log(`Second attempt to play video ${index+1} failed:`,e))},100))})}catch(error){this.log(`Exception trying to play video ${index+1}:`,error)}}})},initialize:function(){this.log("Initializing video loop handler"),this.playAllLoopingVideos(),this.setupVideoObserver()},setupVideoObserver:function(){window.videoLoopObserver&&"function"==typeof window.videoLoopObserver.disconnect&&window.videoLoopObserver.disconnect();var loopingVideos=document.querySelectorAll('video[data-dt-video-loop="true"]');loopingVideos.length&&(loopingVideos.forEach(video=>{video.removeEventListener("pause",this.handleVideoPause),video.addEventListener("pause",this.handleVideoPause)}),this.log("Video observers set up"))},handleVideoPause:function(event){let video=event.target;"true"!==video.getAttribute("data-dt-video-loop")||video.ended||"hidden"===document.visibilityState||(console.log("[VideoLoopHandler] Looping video was paused unexpectedly, restarting"),setTimeout(()=>{video.play().catch(error=>console.log("[VideoLoopHandler] Error restarting paused video:",error))},100))},reinitialize:function(){this.log("Reinitializing video loop handler after page transition"),setTimeout(()=>{this.initialize()},200),setTimeout(()=>{this.playAllLoopingVideos()},1e3)}};