window.App=window.App||{},window.App.ServiceSlider={debug:!0,resizeTimeout:null,autoSlideInterval:null,progressAnimationId:null,autoSlideDelay:8e3,progressCircle:null,progressStartTime:0,log:function(...args){this.debug&&console.log("[ServiceSlider]",...args)},calculateAndSetSliderHeight:function(){var sliderElement=document.querySelector(".service-overview-slider"),contentPanels=document.querySelectorAll(".service-overview-slider-content");if(sliderElement&&contentPanels.length){this.log("Calculating slider height");let originalHideStates=Array.from(contentPanels).map(panel=>panel.classList.contains("hide"));contentPanels.forEach(panel=>{panel.classList.remove("hide"),panel.style.opacity="0",panel.style.visibility="hidden"});var outerHeights=Array.from(contentPanels).map(panel=>{var style=window.getComputedStyle(panel),marginTop=parseFloat(style.marginTop)||0,style=parseFloat(style.marginBottom)||0;return panel.offsetHeight+marginTop+style}),outerHeights=Math.max(...outerHeights),outerHeights=Math.ceil(outerHeights);this.log(`Setting slider height to ${outerHeights}px`),sliderElement.style.height=outerHeights+"px",contentPanels.forEach((panel,index)=>{originalHideStates[index]?panel.classList.add("hide"):(panel.style.opacity="1",panel.style.visibility="visible")}),window.App.Core&&window.App.Core.scrollInstance&&setTimeout(()=>{window.App.Core.scrollInstance.update(),this.log("Updated Locomotive Scroll instance")},100)}},createProgressCircle:function(){var existingCircle,bgCircle,circle,circumference,pauseButton=document.querySelector(".slider-pause-button");if(pauseButton)return(existingCircle=document.querySelector(".progress-circle-container"))&&existingCircle.remove(),(existingCircle=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("class","progress-circle-container"),existingCircle.setAttribute("viewBox","0 0 100 100"),existingCircle.style.position="absolute",existingCircle.style.top="0",existingCircle.style.left="0",existingCircle.style.width="100%",existingCircle.style.height="100%",existingCircle.style.pointerEvents="none",existingCircle.style.zIndex="2",(bgCircle=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("cx","50"),bgCircle.setAttribute("cy","50"),bgCircle.setAttribute("r","47"),bgCircle.setAttribute("fill","none"),bgCircle.setAttribute("stroke","transparent"),bgCircle.setAttribute("stroke-width","5"),(circle=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("class","progress-circle"),circle.setAttribute("cx","50"),circle.setAttribute("cy","50"),circle.setAttribute("r","47"),circle.setAttribute("fill","none"),circle.setAttribute("stroke","#8A8A8A"),circle.setAttribute("stroke-width","5"),circle.setAttribute("stroke-linecap","round"),circumference=2*Math.PI*47,circle.setAttribute("stroke-dasharray",circumference),circle.setAttribute("stroke-dashoffset",circumference),circle.style.transform="rotate(-90deg)",circle.style.transformOrigin="center",existingCircle.appendChild(bgCircle),existingCircle.appendChild(circle),pauseButton.appendChild(existingCircle),this.progressCircle=circle},animateProgressCircle:function(){if(this.progressCircle){this.progressAnimationId&&(cancelAnimationFrame(this.progressAnimationId),this.progressAnimationId=null);let circumference=2*Math.PI*47,animate=(this.progressStartTime=performance.now(),currentTime=>{var currentTime=currentTime-this.progressStartTime,currentTime=Math.min(currentTime/this.autoSlideDelay,1),dashoffset=circumference*(1-currentTime);this.progressCircle.setAttribute("stroke-dashoffset",dashoffset),currentTime<1&&(this.progressAnimationId=requestAnimationFrame(animate))});this.progressAnimationId=requestAnimationFrame(animate)}},resetProgressCircle:function(){var circumference;this.progressCircle&&(this.progressAnimationId&&(cancelAnimationFrame(this.progressAnimationId),this.progressAnimationId=null),circumference=2*Math.PI*47,this.progressCircle.setAttribute("stroke-dashoffset",circumference))},startAutoSlide:function(){this.autoSlideInterval&&clearInterval(this.autoSlideInterval),this.log("Starting auto-slide"),this.animateProgressCircle(),this.autoSlideInterval=setInterval(()=>{var buttons;window.serviceSliderState&&!window.serviceSliderState.isAnimating&&(buttons=document.querySelectorAll("#service-overview-button-wrapper .service-overview-button")).length&&(buttons=(window.serviceSliderState.activeIndex+1)%buttons.length,this.activatePanel(buttons,!1),this.animateProgressCircle())},this.autoSlideDelay),this.updatePlayPauseButtons(!0)},restartAutoSlide:function(){this.autoSlideInterval?(this.log("Restarting auto-slide timer"),clearInterval(this.autoSlideInterval),this.resetProgressCircle(),this.animateProgressCircle(),this.autoSlideInterval=setInterval(()=>{var buttons;window.serviceSliderState&&!window.serviceSliderState.isAnimating&&(buttons=document.querySelectorAll("#service-overview-button-wrapper .service-overview-button")).length&&(buttons=(window.serviceSliderState.activeIndex+1)%buttons.length,this.activatePanel(buttons,!1),this.animateProgressCircle())},this.autoSlideDelay)):this.startAutoSlide(),this.updatePlayPauseButtons(!0)},stopAutoSlide:function(){this.log("Stopping auto-slide"),this.autoSlideInterval&&(clearInterval(this.autoSlideInterval),this.autoSlideInterval=null),this.resetProgressCircle(),this.progressAnimationId&&(cancelAnimationFrame(this.progressAnimationId),this.progressAnimationId=null),this.updatePlayPauseButtons(!1)},toggleAutoSlide:function(){this.autoSlideInterval?this.stopAutoSlide():this.restartAutoSlide()},updatePlayPauseButtons:function(isPlaying){var playButton=document.querySelector(".slider-play-button"),pauseButton=document.querySelector(".slider-pause-button");playButton&&pauseButton&&(isPlaying?(playButton.classList.add("hide"),pauseButton.classList.remove("hide")):(playButton.classList.remove("hide"),pauseButton.classList.add("hide")))},activatePanel:function(index,fromUserClick=!0){var buttons=document.querySelectorAll("#service-overview-button-wrapper .service-overview-button"),contentPanels=document.querySelectorAll(".service-overview-slider .service-overview-slider-content");if(!(!window.serviceSliderState||window.serviceSliderState.isAnimating||window.serviceSliderState.activeIndex===index||index>=contentPanels.length)){this.log("Activating panel "+index+(fromUserClick?" (user click)":"")),window.serviceSliderState.isAnimating=!0,fromUserClick&&this.restartAutoSlide(),buttons.forEach((button,i)=>{i===index?button.classList.add("active"):button.classList.remove("active")});let currentPanel=contentPanels[window.serviceSliderState.activeIndex],nextPanel=contentPanels[index];currentPanel&&(currentPanel.style.opacity="0",currentPanel.style.visibility="hidden"),nextPanel?(nextPanel.classList.remove("hide"),nextPanel.style.opacity="0",nextPanel.style.visibility="hidden",nextPanel.offsetHeight,setTimeout(()=>{nextPanel.style.opacity="1",nextPanel.style.visibility="visible",setTimeout(()=>{currentPanel&&currentPanel.classList.add("hide"),window.serviceSliderState.activeIndex=index,window.serviceSliderState.isAnimating=!1,window.App.Core&&window.App.Core.scrollInstance&&window.App.Core.scrollInstance.update()},500)},100)):window.serviceSliderState.isAnimating=!1}},initialize:function(){this.log("Initializing service slider");var buttons=document.querySelectorAll("#service-overview-button-wrapper .service-overview-button"),contentPanels=document.querySelectorAll(".service-overview-slider .service-overview-slider-content"),playButton=document.querySelector(".slider-play-button"),pauseButton=document.querySelector(".slider-pause-button");if(this.log(`Found ${buttons.length} buttons and ${contentPanels.length} content panels`),buttons.length&&contentPanels.length){this.calculateAndSetSliderHeight(),pauseButton&&this.createProgressCircle(),window.serviceSliderState&&window.serviceSliderState.resizeHandler&&window.removeEventListener("resize",window.serviceSliderState.resizeHandler);var resizeHandler=()=>{this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.log("Window resized, recalculating slider height"),this.calculateAndSetSliderHeight()},200)},resizeHandler=(window.addEventListener("resize",resizeHandler),contentPanels.forEach(panel=>{""===panel.style.transition&&(panel.style.transition="opacity 0.5s ease, visibility 0.5s ease"),panel.classList.contains("hide")?(panel.style.opacity="0",panel.style.visibility="hidden"):(panel.style.opacity="1",panel.style.visibility="visible")}),window.serviceSliderState&&window.serviceSliderState.eventListeners&&(this.log("Cleaning up previous listeners"),window.serviceSliderState.eventListeners.forEach(item=>{item&&item.element&&"function"==typeof item.element.removeEventListener&&item.element.removeEventListener(item.type,item.handler)})),this.stopAutoSlide(),window.serviceSliderState={activeIndex:0,isAnimating:!1,eventListeners:[],resizeHandler:resizeHandler},buttons.forEach((button,index)=>{var clickHandler=e=>{e.preventDefault(),this.activatePanel(index,!0)};button.addEventListener("click",clickHandler),window.serviceSliderState.eventListeners.push({element:button,type:"click",handler:clickHandler}),button.addEventListener("touchend",clickHandler),window.serviceSliderState.eventListeners.push({element:button,type:"touchend",handler:clickHandler})}),playButton&&pauseButton&&(playButton.classList.add("hide"),pauseButton.classList.remove("hide"),playButton.addEventListener("click",resizeHandler=e=>{e.preventDefault(),this.restartAutoSlide()}),window.serviceSliderState.eventListeners.push({element:playButton,type:"click",handler:resizeHandler}),pauseButton.addEventListener("click",playButton=e=>{e.preventDefault(),this.stopAutoSlide()}),window.serviceSliderState.eventListeners.push({element:pauseButton,type:"click",handler:playButton})),Array.from(buttons).findIndex(btn=>btn.classList.contains("active")));let initialIndex=-1!==resizeHandler?resizeHandler:0;buttons.forEach((button,i)=>{i===initialIndex?button.classList.add("active"):button.classList.remove("active")}),contentPanels.forEach((panel,i)=>{i===initialIndex?(panel.classList.remove("hide"),panel.style.opacity="1",panel.style.visibility="visible"):(panel.classList.add("hide"),panel.style.opacity="0",panel.style.visibility="hidden")}),window.serviceSliderState.activeIndex=initialIndex,this.log("Service slider initialized successfully"),this.startAutoSlide()}else this.log("Required elements not found. Not on homepage or DOM not ready.")},reinitialize:function(){this.log("Reinitializing service slider"),this.stopAutoSlide(),this.progressAnimationId&&(cancelAnimationFrame(this.progressAnimationId),this.progressAnimationId=null),setTimeout(()=>{this.initialize()},100)}};