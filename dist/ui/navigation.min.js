window.App=window.App||{},window.App.Navigation={desktopBreakpoint:992,dropdownOpen:!1,dropdownTimeout:null,proximityThreshold:50,debug:!0,log:function(...args){this.debug&&console.log("[Navigation]",...args)},isDesktop:function(){return window.innerWidth>=this.desktopBreakpoint},isMobileMenuOpen:function(){var mobileNavWrapper=document.getElementById("mobile-nav-wrapper");return!!mobileNavWrapper&&"none"!==window.getComputedStyle(mobileNavWrapper).display},updateMobileNavButtonText:function(){var isOpen,mobileNavButton=document.getElementById("mobile-nav-button");mobileNavButton&&(mobileNavButton=mobileNavButton.querySelector(".body1-1"))&&(isOpen=this.isMobileMenuOpen(),mobileNavButton.textContent=isOpen?"Close":"Menu",this.log(`Updated mobile button text to: ${mobileNavButton.textContent} based on menu display state`))},updateScrollState:function(){this.isMobileMenuOpen()?window.App.LocomotiveScroll&&"function"==typeof window.App.LocomotiveScroll.pause&&(window.App.LocomotiveScroll.pause(),this.log("Locomotive scroll paused (menu open)")):window.App.LocomotiveScroll&&"function"==typeof window.App.LocomotiveScroll.resume&&(window.App.LocomotiveScroll.resume(),this.log("Locomotive scroll resumed (menu closed)"))},getActiveLink:function(links){let path=window.location.pathname,active=null;return links.forEach(link=>{var href=link.getAttribute("href");"/"===href?"/"===path&&(active=link):path!==href&&0!==path.indexOf(href+"/")||(active=link)}),active},moveActiveTo:function(link,activeBg,menu,pillWidthAdjustment){var adjustedWidth;this.isDesktop()?(link=link.getBoundingClientRect(),menu=menu.getBoundingClientRect(),adjustedWidth=link.width-pillWidthAdjustment,link=link.left-menu.left+pillWidthAdjustment/2,activeBg.style.display="block",activeBg.style.left=link+"px",activeBg.style.width=adjustedWidth+"px",activeBg.style.transform="scaleY(1.05)",setTimeout(()=>{activeBg.style.transform="scaleY(1)"},300)):activeBg.style.display="none"},updateActiveBackground:function(links,activeBg,menu,pillWidthAdjustment){var adjustedWidth;this.isDesktop()&&(links=this.getActiveLink(links))?(links=links.getBoundingClientRect(),menu=menu.getBoundingClientRect(),adjustedWidth=links.width-pillWidthAdjustment,links=links.left-menu.left+pillWidthAdjustment/2,activeBg.style.display="block",activeBg.style.left=links+"px",activeBg.style.width=adjustedWidth+"px"):activeBg.style.display="none"},setupMobileNavButton:function(){var mobileNavButton=document.getElementById("mobile-nav-button");let mobileNavWrapper=document.getElementById("mobile-nav-wrapper");mobileNavButton&&mobileNavWrapper?(this.log("Setting up mobile nav button"),this.updateMobileNavButtonText(),this.updateScrollState(),mobileNavButton.addEventListener("click",e=>{e&&e.preventDefault(),this.isMobileMenuOpen()?mobileNavWrapper.classList.remove("open"):mobileNavWrapper.classList.add("open"),setTimeout(()=>{this.updateMobileNavButtonText(),this.updateScrollState()},10)}),mobileNavWrapper.querySelectorAll("a").forEach(link=>{link.addEventListener("click",()=>{setTimeout(()=>{this.updateMobileNavButtonText(),this.updateScrollState()},10)})}),window.addEventListener("resize",()=>{this.isDesktop()&&this.isMobileMenuOpen()&&(mobileNavWrapper.classList.remove("open"),setTimeout(()=>{this.updateMobileNavButtonText(),this.updateScrollState()},10))}),new MutationObserver(mutations=>{mutations.forEach(mutation=>{"attributes"!==mutation.type||"style"!==mutation.attributeName&&"class"!==mutation.attributeName||(this.updateMobileNavButtonText(),this.updateScrollState())})}).observe(mobileNavWrapper,{attributes:!0,attributeFilter:["style","class"]})):this.log("Mobile nav elements not found")},alignDropdownWithMenu:function(dropdown){var navRect,menu=document.getElementById("nav-menu");menu&&dropdown&&(navRect=menu.getBoundingClientRect(),menu=menu.parentElement.getBoundingClientRect(),navRect=navRect.left-menu.left,dropdown.style.left=navRect+"px",this.log(`Aligned dropdown: left=${navRect}px (keeping original top position)`))},showServicesDropdown:function(dropdown){this.isDesktop()&&!this.dropdownOpen&&(this.log("Showing dropdown"),this.dropdownTimeout&&(clearTimeout(this.dropdownTimeout),this.dropdownTimeout=null),dropdown.style.display="flex",dropdown.style.flexDirection="column",dropdown.style.opacity="0",dropdown.style.transform="translateY(-10px)",dropdown.style.transition="opacity 0.3s ease, transform 0.3s ease",dropdown.style.position="absolute",dropdown.style.zIndex="1000",this.alignDropdownWithMenu(dropdown),dropdown.offsetHeight,setTimeout(()=>{dropdown.style.opacity="1",dropdown.style.transform="translateY(0)"},10),this.dropdownOpen=!0)},hideServicesDropdown:function(dropdown){this.dropdownOpen&&(this.log("Hiding dropdown"),dropdown.style.opacity="0",dropdown.style.transform="translateY(-10px)",this.dropdownTimeout=setTimeout(()=>{dropdown.style.display="none",this.dropdownTimeout=null},300),this.dropdownOpen=!1)},isInProximity:function(x,y,element){var closestX;return!!element&&(element=element.getBoundingClientRect(),closestX=Math.max(element.left,Math.min(x,element.right)),element=Math.max(element.top,Math.min(y,element.bottom)),Math.sqrt(Math.pow(x-closestX,2)+Math.pow(y-element,2))<=this.proximityThreshold)},setupDropdown:function(){let servicesDropdownTrigger=document.getElementById("nav-link0"),servicesDropdown=document.getElementById("nav-services-dropdown");if(servicesDropdownTrigger&&servicesDropdown){this.log("Setting up dropdown","trigger:",servicesDropdownTrigger,"dropdown:",servicesDropdown),servicesDropdown.style.display="none",servicesDropdown.style.opacity="0",this.alignDropdownWithMenu(servicesDropdown),servicesDropdownTrigger.addEventListener("click",e=>(e.preventDefault(),e.stopPropagation(),this.log("Services dropdown click prevented"),!1)),servicesDropdownTrigger.onmouseenter=()=>{this.log("Trigger mouseenter"),this.isDesktop()&&this.showServicesDropdown(servicesDropdown)},servicesDropdown.onmouseenter=()=>{this.log("Dropdown mouseenter"),this.isDesktop()&&this.showServicesDropdown(servicesDropdown)},servicesDropdownTrigger.addEventListener("mouseover",()=>{this.log("Trigger mouseover"),this.isDesktop()&&this.showServicesDropdown(servicesDropdown)});let dropdownLinks=servicesDropdown.querySelectorAll("a"),resetLinksOpacity=()=>{dropdownLinks.forEach(link=>{link.style.opacity="1",link.style.transition="opacity 0.2s ease"})};dropdownLinks.forEach(link=>{link.style.transition="opacity 0.2s ease",link.addEventListener("mouseenter",()=>{dropdownLinks.forEach(otherLink=>{otherLink.style.opacity=otherLink!==link?"0.5":"1"})}),link.addEventListener("mouseleave",()=>{resetLinksOpacity()}),link.addEventListener("click",()=>{this.log("Dropdown link clicked, closing dropdown"),this.hideServicesDropdown(servicesDropdown)})}),servicesDropdown.addEventListener("mouseleave",resetLinksOpacity),document.addEventListener("mousemove",e=>{var inTriggerProximity,mouseX;this.isDesktop()&&(mouseX=e.clientX,e=e.clientY,this.dropdownOpen)&&(inTriggerProximity=this.isInProximity(mouseX,e,servicesDropdownTrigger),mouseX=this.isInProximity(mouseX,e,servicesDropdown),inTriggerProximity||mouseX||(this.hideServicesDropdown(servicesDropdown),resetLinksOpacity()))}),window.addEventListener("scroll",()=>{this.isDesktop()&&this.dropdownOpen&&(this.hideServicesDropdown(servicesDropdown),resetLinksOpacity())}),window.addEventListener("resize",()=>{this.isDesktop()&&this.dropdownOpen&&this.alignDropdownWithMenu(servicesDropdown)})}else this.log("Dropdown elements not found:","trigger:",servicesDropdownTrigger,"dropdown:",servicesDropdown)},initialize:function(){this.log("Initializing navigation"),setTimeout(()=>{this.log("DOM ready, setting up navigation");let links=document.querySelectorAll(".nav-link"),activeBg=document.querySelector(".nav-link-active"),menu=document.querySelector(".nav-menu");if(links.length&&activeBg&&menu){this.log("Found navigation elements"),this.setupDropdown(),this.setupMobileNavButton();var menuRect,adjustedWidth,currentLink=this.getActiveLink(links);currentLink&&this.isDesktop()?(activeBg.style.display="block",activeBg.style.transition="none",currentLink=currentLink.getBoundingClientRect(),menuRect=menu.getBoundingClientRect(),adjustedWidth=currentLink.width-10,currentLink=currentLink.left-menuRect.left+5,activeBg.style.left=currentLink+"px",activeBg.style.width=adjustedWidth+"px",activeBg.offsetHeight,activeBg.style.transition="left 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), width 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)"):activeBg.style.display="none",links.forEach(link=>{"nav-link0"!==link.id&&link.addEventListener("click",()=>{this.isDesktop()&&this.moveActiveTo(link,activeBg,menu,10)})}),window.addEventListener("resize",()=>{this.updateActiveBackground(links,activeBg,menu,10),this.setupDropdown()}),document.addEventListener("swup:contentReplaced",()=>{setTimeout(()=>{this.log("Content replaced, reinitializing"),this.initialize(),this.updateScrollState()},100)})}else this.log("Required navigation elements not found")},100)}},document.addEventListener("DOMContentLoaded",function(){window.App.Navigation.initialize()}),window.addEventListener("load",function(){document.querySelector(".nav-link-active[style*='display: block']")||window.App.Navigation.initialize(),window.App.Navigation.setupDropdown(),window.App.Navigation.updateScrollState()});