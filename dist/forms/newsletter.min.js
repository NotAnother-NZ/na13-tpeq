window.App=window.App||{},window.App.Newsletter={initialize:function(){var observer,successEl;document.querySelector("#newsletter-form")&&(this.initializeFormHandling(),"true"===sessionStorage.getItem("newsletterSubmitted")&&("undefined"!=typeof requestIdleCallback?requestIdleCallback(()=>{var form=document.getElementById("newsletter-form"),title=document.getElementById("newsletter-form-title");form&&form.classList.add("hide"),title&&(title.textContent="Thanks for subscribing to our newsletter — we'll keep you posted!")}):setTimeout(()=>{var form=document.getElementById("newsletter-form"),title=document.getElementById("newsletter-form-title");form&&form.classList.add("hide"),title&&(title.textContent="Thanks for subscribing to our newsletter — we'll keep you posted!")},0)),observer=new MutationObserver(function(mutationsList){for(var mutation of mutationsList)"attributes"===mutation.type&&"style"===mutation.attributeName&&(mutation=document.querySelector(".global-form-success.newsletter"))&&"none"!==getComputedStyle(mutation).display&&sessionStorage.setItem("newsletterSubmitted","true")}),successEl=document.querySelector(".global-form-success.newsletter"))&&observer.observe(successEl,{attributes:!0,attributeFilter:["style"]})},initializeFormHandling:function(){let emailInput=document.getElementById("n-email"),submitProxy=document.getElementById("newsletter-submit-proxy"),submitButton=document.getElementById("newsletter-submit");var form;function isValidEmail(email){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)}function updateTooltips(){var emailNotEmpty=0<emailInput.value.trim().length,emailValid=isValidEmail(emailInput.value.trim());emailNotEmpty?emailValid?emailInput.removeAttribute("title"):emailInput.title="Please enter a valid email address.":emailInput.title="Please enter your email address."}function validateForm(){var emailNotEmpty=0<emailInput.value.trim().length,emailValid=isValidEmail(emailInput.value.trim());emailNotEmpty?emailValid?emailInput.setCustomValidity(""):emailInput.setCustomValidity("Please enter a valid email address."):emailInput.setCustomValidity("Please enter your email address."),emailNotEmpty&&emailValid?(submitProxy.style.display="",submitProxy.classList.remove("disable")):submitProxy.style.display="none",updateTooltips()}emailInput&&submitProxy&&submitButton&&(submitProxy.style.display="none",(form=emailInput.form)&&form.setAttribute("novalidate","true"),emailInput.addEventListener("input",validateForm),emailInput.addEventListener("focus",updateTooltips),emailInput.addEventListener("blur",updateTooltips),emailInput.addEventListener("invalid",function(e){e.preventDefault(),""===emailInput.value.trim()?emailInput.setCustomValidity("Please enter your email address."):emailInput.setCustomValidity("Please enter a valid email address."),updateTooltips()}),submitProxy.addEventListener("click",function(e){e.preventDefault();e=submitProxy.querySelector(".button-text");e&&(e.textContent="Please wait..."),submitButton&&submitButton.click()}),validateForm())}};